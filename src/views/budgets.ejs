<%- include("partials/header.ejs") %>
<%- include("partials/nav.ejs") %>
<!-- requires a budget: [{category, budgeted}] -->
<!-- requires a budgetTotal -->
<h1>Budgets</h1>
        <div>
        <p>Total budgeted: $<%= budgetTotal %> </p>
        <p>Projected Income: $<%= projectedIncome %> </p>
        <p>lef to alocate: <%= projectedIncome - budgetTotal %>  </p>
        </div>
        <%- include("./partials/budgetPopEdit.ejs") %> 
        <table>
                <thead>
                        <tr>
                                <th>category</th>
                                <th>budgeted</th>
                        </tr>
                </thead>
                <tbody>
                        <% for (var i = 0; i < budgets.length; i++) { %>
                        <tr>
                                <td><%= budgets[i].category %> </td>
                                <td>$ <%= budgets[i].budget %> </td>
                                <td>
                                        <button class="editButton editButtonBudgets" type="button"
                                        itmId="<%= budgets[i].id %>"
                                        category="<%= budgets[i].category %>"
                                        budget="<%= budgets[i].budget %>"
                                        >Edit</button>
                                </td>
                                <form action="/deleteBudgetItm" method="POST">
                                        <input name="deleteCategory" value="<%= budgets[i].id %>" hidden>
                                        <td><button class="deleteBtn" type="submit">delete</button></td>
                                </form>
                        </tr>
                        <% } %>
                </tbody>
        </table>
        <form name="newBudgetItm" onsubmit="newBudgetItem(this)">
                <input type="text" autocomplete="off" name="category" placeholder="category" autofocus required>
                <input type="number" step=".01" name="budgeted" placeholder="100" required>
                <button type="submit">Add</button>
        </form>
        <script src="./js/forms.js"></script>
        <script src="./js/budgetBtns.js"></script>
        
<%- include("partials/footer.ejs") %>